<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer"/>

    <title>登录</title>

    <link type="text/css" rel="stylesheet"
          href="https://img3.doubanio.com/f/accounts/91099136ed852a4a0e6fa61d97b32bc8e35b972c/passport/build/login/index.css">

</head>
<body>
<div id="account">

    <div id="db-nav-sns" class="nav">
        <div class="nav-wrap">
            <div class="nav-primary">
                <a href="https://www.douban.com">
                    <!--标题logo-->
                    <img src="https://img3.doubanio.com/f/accounts/4fd84763a74089b20eb02ba0225d6e7739d2c432/passport/pics/douban_logo@2x.png"
                         width="142" alt="豆瓣">
                </a>
            </div>
        </div>
    </div>


    <div class="login-wrap">
        <div class="login-left">
            <div class="login-left-box">
                <div class="login-slide">
                    <!--右边slide图-->
                    <img class=""
                         src="https://img3.doubanio.com/f/accounts/a3e64b64414c154a0861f6823410dc3063b60623/passport/pics/pic0.png">
                    <img src="https://img3.doubanio.com/f/accounts/1176e98e5c534532f504de27da1f9ecce3654a10/passport/pics/pic1.png"
                         class="">
                    <img src="https://img3.doubanio.com/f/accounts/5ea76b299bdc9c6b0238b86b7c33481cfce2975b/passport/pics/pic2.png"
                         class="on">
                </div>
            </div>

        </div>
        <div class="login-right">


            <link type="text/css" rel="stylesheet"
                  href="https://img3.doubanio.com/f/accounts/e54c1d250be79eb0aa52b8b8da82b7946183d6e8/passport/build/login/base.css">

            <div class="account-body login-wrap login-start ">
                <div class="account-body-tabs">
                    <ul class="tab-start">
                        <li class="account-tab-phone">短信登录／注册</li>
                        <li class="account-tab-account">密码登录</li>
                    </ul>
                    <ul class="tab-quick">
                        <li class="account-tab-scan">二维码登录</li>
                    </ul>
                    <div class="account-tab-switch">
                        <div class="account-tab-switch-icon">
                            <a class="quick icon-switch"></a>
                            <a class="start icon-switch"></a>
                        </div>
                        <div class="account-tab-switch-text">
                            <span class="start">短信登录／注册</span>
                        </div>
                    </div>
                </div>
                <div class="account-tabcon-start">
                    <div class="account-form">
                        <div class="account-form-error"><span class="hide"> </span></div>

                        <div class="account-form-raw">
                            <label class="account-form-label">用户名：</label>
                            <div class="account-form-field">
                                <input id="username" name="username" type="text" class="account-form-input"
                                       placeholder="手机号 / 邮箱" tabindex="1">
                                <span class="icon clear-input hide"></span>
                            </div>
                        </div>


                        <div class="account-form-raw">
                            <label class="account-form-label">密 码：</label>
                            <div class="account-form-field">
                                <input id="password" type="password" name="password" class="account-form-input password"
                                       placeholder="密码" tabindex="3">
                                <span class="icon openpwd hide"></span>
                                <a target="_blank" href="https://accounts.douban.com/passport/get_password"
                                   class="fwd-link">找回密码</a>
                            </div>
                        </div>


                        <div class="account-form-field-submit ">
                            <a href="javascript:;" class="btn btn-account">登录豆瓣</a>
                        </div>

                    </div>
                    <div class="account-form-ft">
                        <p style="margin-left: 170px" class=""><a style="color: grey" href="register">还没账号？去注册</a>
                        </p>
                        <span style="color: red" th:if="${not #strings.isEmpty(errorMsg)}" th:text="${errorMsg}"></span>

                    </div>

                    <div class="account-form-3rd ">
                        <div class="account-form-3rd-hd">第三方登录:</div>
                        <div class="account-form-3rd-bd">

                            <a href="https://www.douban.com/accounts/connect/wechat/?from=movie&amp;redir=https%3A//movie.douban.com/"
                               class="link-3rd-wx link-3rd-wx-on" target="_top" title="用微信登录">wechat</a>
                            <a href="https://www.douban.com/accounts/connect/sina_weibo/?from=movie&amp;redir=https%3A//movie.douban.com/&amp;fallback="
                               class="link-3rd-wb link-3rd-wb-on" target="_top" title="用微博登录">weibo</a>
                            <a target="_top"
                               href="https://www.douban.com/accounts/connect/qq/?from=movie&amp;redir=https%3A//movie.douban.com/"
                               class="link-3rd-qq link-3rd-qq-on" title="用QQ登录"></a>
                        </div>
                    </div>
                </div>
            </div>


            <script type="text/template" id="tmpl_phone">

                <form id="phoneAndCodeForm">
                    <div class="account-form-error"><span class="hide"></span></div>
                    <div class="account-form-raw">
                        <label class="account-form-label">手机号：</label>
                        <div class="account-form-field account-form-field-phone">
                            <span class="icon clear-input hide"></span>
                            <input type="phone" name="loginPhone" id="loginPhone" maxlength="13" class="account-form-input"
                                   placeholder="手机号">
                            <div class="account-form-field-area-code">
                                <div class="account-form-field-area-code-label js-choose-district">+86</div>
                            </div>
                        </div>
                    </div>
                    <div class="nation-select hide"></div>
                    <div class="account-form-raw">
                        <label class="account-form-label">验证码：</label>
                        <div class="account-form-field account-form-codes">
                            <input name="loginCode" id="loginCode" type="text" maxlength="6" class="account-form-input" placeholder="验证码" autocomplete="off">
                            <div style="font: normal 13px/1.618 Helvetica,Arial,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif;-webkit-tap-highlight-color: transparent;color: #fff;margin: 0;position: absolute;padding: 0 10px;right: 0;top: 0;line-height: 42px;">
                                <a href="javascript:send();"><span style="color: #00A65F">获取验证码</span></a>
                            </div>
                        </div>
                    </div>
                    <div class="account-form-field-submit ">
                        <button type="button" onclick="checkLogin()" style="width: 280px"  class="btn btn-account">登录豆瓣</button>
                    </div>
                </form>

            </script>

            <script>

                function checkLogin() {


                    $.ajax({
                        type:'POST'
                        ,url: 'checkLoginByPhone'
                        ,data:$("#phoneAndCodeForm").serialize()
                        ,success : function (res) {
                            if(res.code==0){
                                alert(res.msg)
                                return  false;
                            }else if(res.code==-1){
                                alert(res.msg)
                            }else if(res.code==-2){
                                alert(res.msg)
                            }else {
                                window.location.href="/intro/main";
                            }
                        }
                    })
                }

                function send(){
                    $.ajax({
                        type:'GET'
                        ,url:'/send'
                        ,data:{loginPhone:$("#loginPhone").val()}
                        ,success : function (res) {
                            if (res.exist==0){
                                alert(res.msg)
                                return  false;
                            }
                            if(res.status==0){
                                alert(res.msg)
                            }
                            if(res.status==1){
                                alert(res.msg)
                            }
                            if(res.status==-1){
                                alert(res.msg)
                            }
                        }
                    });
                }
            </script>

            <script type="text/template" id="tmpl_account">
                <div class="account-form-error"><span class="hide"> </span></div>
                <form th:action="@{/loginUser}" id="loginForm" method="post">
                    <div class="account-form-raw">
                        <label class="account-form-label">用户名：</label>
                        <div class="account-form-field">
                            <input id="leoUserPhone" name="leoUserPhone" type="text" class="account-form-input"
                                   placeholder="手机号 / 邮箱" tabindex="1">
                            <span class="icon clear-input hide"></span>
                        </div>
                    </div>

                    <div class="account-form-raw">
                        <label class="account-form-label">密 码：</label>
                        <div class="account-form-field">
                            <input id="leoUserPassword" type="password" name="leoUserPassword"
                                   class="account-form-input password"
                                   placeholder="密码" tabindex="3">
                            <span class="icon openpwd hide"></span>
                            <a target="_blank" href="" class="fwd-link">找回密码</a>
                        </div>
                    </div>

                    <div class="account-form-field-submit ">
                        <input type="submit" style="width: 280px" value="登录豆瓣" class="btn btn-account">
                    </div>
                </form>

            </script>


            <script type="text/javascript"
                    src="https://img3.doubanio.com/f/accounts/c5268df4c1f0bada95cb3d2b80089a50b494b5ee/js/lib/jquery.min.js"></script>

            <script type="text/javascript">
                var _REDIR = 'https://movie.douban.com/';
                var _TMPL_ACCOUNT = document.getElementById('tmpl_account').innerHTML;
                var _TMPL_PHONE = document.getElementById('tmpl_phone').innerHTML;
                var _TMPL_ABROAD = document.getElementById('tmpl_abroad').innerHTML;
                var _TMPL_AGREEMENT = document.getElementById('tmpl_agreement').innerHTML;
                var isAnony = false;
                ;(function () {
                })();
            </script>
            <script src="https://img3.doubanio.com/f/accounts/c944ce36e72f90ebe6f2fa9db0267383daffa354/passport/build/login/base.js"></script>

            <!-- <iframe style="height: 450px; width: 340px;" frameborder='0' src="/passport/login_base"></iframe> -->
        </div>
    </div>


</div>
<div></div>
<div class="ui-dialog-mountnode" style="display: none;">
    <div class="ui-dialog-mask">
        <div class="ui-dialog-container">
            <div class="ui-dialog-panel">
                <div class="ui-dialog-title-wrapper"></div>
                <div class="ui-dialog-body-wrapper"></div>

                <a href="javascript:;" class="ui-dialog-lnk-close">
                    ×
                </a>

            </div>
        </div>
    </div>
</div>


<script type="text/javascript"
        src="https://img3.doubanio.com/f/accounts/bbd909b4dd82f6e1c664380ff01325ec129436a1/js/lib/do.js"
        data-cfg-corelib="https://img3.doubanio.com/f/accounts/c5268df4c1f0bada95cb3d2b80089a50b494b5ee/js/lib/jquery.min.js"></script>


<script type="text/javascript"
        src="https://img3.doubanio.com/f/accounts/18c068d028125d872db218d015d0a5f850b11ee4/passport/build/login/index.js"></script>
<script type="text/javascript">
    var _paq = _paq || [];
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function () {
        var p = (('https:' == document.location.protocol) ? 'https' : 'http'), u = p + '://fundin.douban.com/';
        _paq.push(['setTrackerUrl', u + 'piwik']);
        _paq.push(['setSiteId', '100001']);
        var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
        g.type = 'text/javascript';
        g.defer = true;
        g.async = true;
        g.src = p + '://img3.doubanio.com/dae/fundin/piwik.js';
        s.parentNode.insertBefore(g, s);
    })();
</script>

  














